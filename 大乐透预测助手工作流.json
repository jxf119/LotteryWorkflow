{
  "name": "å¤§ä¹é€é¢„æµ‹åŠ©æ‰‹å·¥ä½œæµ",
  "nodes": [
    {
      "parameters": {
        "triggerTimes": {
          "item": [
            {
              "mode": "everyWeek",
              "hour": 15,
              "weekday": "5"
            }
          ]
        }
      },
      "id": "8f3c2957-cc6b-4ef5-9b03-89ccd456a6ee",
      "name": "æ¯å‘¨äº”15ç‚¹è§¦å‘",
      "type": "n8n-nodes-base.cron",
      "position": [
        -208,
        192
      ],
      "typeVersion": 1,
      "notesInFlow": false,
      "notes": "æ¯å‘¨äº”15:00è‡ªåŠ¨è§¦å‘"
    },
    {
      "parameters": {
        "jsCode": "// ç¼“å­˜æ£€æŸ¥æœºåˆ¶\nconst now = new Date();\nconst today = now.toISOString().split('T')[0];\n\n// æ£€æŸ¥ç¼“å­˜æ–‡ä»¶\ntry {\n    const fs = require('fs');\n    const cachePath = '/tmp/daletou_cache.json';\n    \n    if (fs.existsSync(cachePath)) {\n        const cacheData = JSON.parse(fs.readFileSync(cachePath, 'utf8'));\n        \n        // æ£€æŸ¥ç¼“å­˜æ˜¯å¦æœ‰æ•ˆï¼ˆ24å°æ—¶å†…ï¼‰\n        if (cacheData.date === today && cacheData.data) {\n            return [{\n                json: {\n                    useCache: true,\n                    cachedData: cacheData.data,\n                    timestamp: cacheData.timestamp\n                }\n            }];\n        }\n    }\n} catch (e) {\n    // ç¼“å­˜æ£€æŸ¥å¤±è´¥ï¼Œç»§ç»­æ­£å¸¸æµç¨‹\n}\n\nreturn [{\n    json: {\n        useCache: false\n    }\n}];"
      },
      "id": "f2e226d0-d101-4b7e-ba46-1bf95c63f597",
      "name": "ç¼“å­˜æ£€æŸ¥",
      "type": "n8n-nodes-base.code",
      "position": [
        16,
        192
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "jsCode": "const useCache = $input.item.json.useCache;\nreturn [{\n    json: {\n        useCache: useCache,\n        cachedData: useCache ? $input.item.json.cachedData : null,\n        shouldContinue: !useCache\n    }\n}];"
      },
      "id": "6e9d8920-ee98-4a25-9881-f743564e5ae9",
      "name": "è·¯ç”±æ§åˆ¶",
      "type": "n8n-nodes-base.code",
      "position": [
        0,
        0
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "jsCode": "// è·å–å½“å‰å¹´ä»½å’ŒæœŸæ•°\nconst now = new Date();\nconst year = now.getFullYear();\nconst yearStart = new Date(year, 0, 1);\nconst dayOfYear = Math.floor((now - yearStart) / (24 * 60 * 60 * 1000)) + 1;\nlet currentIssue = Math.ceil(dayOfYear / (7/3));\n\n// åˆ›å»ºä¸€ä¸ªåŒ…å«æœ€è¿‘100ä¸ªæœŸå·çš„æ•°ç»„\nconst items = [];\nfor (let i = 0; i < 100; i++) {\n    let issue = currentIssue - i;\n    let issueYear = year;\n    \n    // å¤„ç†è·¨å¹´çš„æƒ…å†µ\n    if (issue <= 0) {\n        let prevYearDayCount = 365; // é»˜è®¤å¹³å¹´\n        let prevYear = year - 1;\n        // åˆ¤æ–­æ˜¯å¦æ˜¯é—°å¹´\n        if ((prevYear % 4 === 0 && prevYear % 100 !== 0) || (prevYear % 400 === 0)) {\n            prevYearDayCount = 366;\n        }\n\n        let prevYearIssueCount = Math.ceil(prevYearDayCount / (7/3));\n        issue = prevYearIssueCount + issue; // issueæ˜¯è´Ÿæ•°ï¼Œæ‰€ä»¥ç”¨åŠ æ³•\n        issueYear--;\n    }\n\n    const issueString = String(issue).padStart(3, '0');\n    const fullIssueNumber = `${String(issueYear).slice(-2)}${issueString}`\n\n    items.push({\n        json: { \n            qh: fullIssueNumber,\n            id: '10003222',\n            key: '8d7710151f1ce1ee3cf49a25b7f6633d'\n        }\n    });\n}\n\nreturn items;"
      },
      "id": "c391c78a-fafd-42b2-bdfd-e2bcb946c4f0",
      "name": "ç”ŸæˆæœŸå·",
      "type": "n8n-nodes-base.code",
      "position": [
        192,
        0
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "url": "https://cn.apihz.cn/api/caipiao/daletou.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "id",
              "value": "={{ $json.id }}"
            },
            {
              "name": "key",
              "value": "={{ $json.key }}"
            },
            {
              "name": "qh",
              "value": "={{ $json.qh }}"
            }
          ]
        },
        "options": {}
      },
      "id": "92bfe9ae-806f-465b-a1ec-a78f4e8bae16",
      "name": "æ•°æ®è·å–",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        384,
        0
      ],
      "typeVersion": 4.2
    },
    {
      "parameters": {
        "jsCode": "// æ•°æ®ç¼“å­˜ä¸å†å²å‡†ç¡®ç‡ç»Ÿè®¡\nconst items = $input.all();\n\n// ä¿å­˜æ•°æ®åˆ°ç¼“å­˜\ntry {\n    const fs = require('fs');\n    const now = new Date();\n    const cachePath = '/tmp/daletou_cache.json';\n    const historyPath = '/tmp/daletou_history.json';\n    \n    const cacheData = {\n        date: now.toISOString().split('T')[0],\n        timestamp: Date.now(),\n        data: items\n    };\n    \n    fs.writeFileSync(cachePath, JSON.stringify(cacheData, null, 2));\n    \n    // æ›´æ–°å†å²å‡†ç¡®ç‡è®°å½•\n    let historyData = { predictions: [], totalAccuracy: 0 };\n    if (fs.existsSync(historyPath)) {\n        historyData = JSON.parse(fs.readFileSync(historyPath, 'utf8'));\n    }\n    \n    // æ·»åŠ å½“å‰é¢„æµ‹åˆ°å†å²è®°å½•ï¼ˆå¦‚æœæ²¡æœ‰ï¼‰\n    const currentPrediction = {\n        date: now.toISOString(),\n        issue: now.toISOString().split('T')[0].replace(/-/g, ''),\n        numbers: [],\n        actual: null,\n        accuracy: 0\n    };\n    \n    if (!historyData.predictions.find(p => p.date === currentPrediction.date)) {\n        historyData.predictions.unshift(currentPrediction);\n        \n        // ä¿ç•™æœ€è¿‘30æ¬¡è®°å½•\n        if (historyData.predictions.length > 30) {\n            historyData.predictions = historyData.predictions.slice(0, 30);\n        }\n        \n        // è®¡ç®—æ€»ä½“å‡†ç¡®ç‡\n        const validPredictions = historyData.predictions.filter(p => p.accuracy > 0);\n        if (validPredictions.length > 0) {\n            historyData.totalAccuracy = Math.round(\n                validPredictions.reduce((sum, p) => sum + p.accuracy, 0) / validPredictions.length\n            );\n        }\n        \n        fs.writeFileSync(historyPath, JSON.stringify(historyData, null, 2));\n    }\n} catch (e) {\n    console.log('ç¼“å­˜å†™å…¥å¤±è´¥:', e.message);\n}\n\n// å¤„ç†å†å²å‡†ç¡®ç‡æ•°æ®\ntry {\n    const fs = require('fs');\n    const historyPath = '/tmp/daletou_history.json';\n    let accuracyInfo = {\n        totalAccuracy: 0,\n        lastPrediction: 'æ— ',\n        predictionCount: 0\n    };\n    \n    if (fs.existsSync(historyPath)) {\n        const historyData = JSON.parse(fs.readFileSync(historyPath, 'utf8'));\n        accuracyInfo = {\n            totalAccuracy: historyData.totalAccuracy || 0,\n            lastPrediction: historyData.predictions[0]?.actual || 'å¾…å¼€å¥–',\n            predictionCount: historyData.predictions.length || 0\n        };\n    }\n\n    // å¤„ç†æ‰€æœ‰è·å–åˆ°çš„æ•°æ®\n    let formattedHistory = 'è·å–åˆ°æœ€è¿‘100æœŸå¼€å¥–æ•°æ®ï¼Œç”¨äºAIåˆ†æå’Œé¢„æµ‹\\n\\nå†å²å‡†ç¡®ç‡ç»Ÿè®¡ï¼š\\n';\n    formattedHistory += `- æ€»ä½“å‡†ç¡®ç‡: ${accuracyInfo.totalAccuracy}%\\n`;\n    formattedHistory += `- ä¸Šæ¬¡é¢„æµ‹: ${accuracyInfo.lastPrediction}\\n`;\n    formattedHistory += `- é¢„æµ‹æ¬¡æ•°: ${accuracyInfo.predictionCount}\\n\\n`;\n    \n    for (const item of items) {\n        const record = item.json.data;\n        if (record && record.qishu && record.hongqiu && record.lanqiu) {\n            formattedHistory += `${record.qishu}: ${record.hongqiu} | ${record.lanqiu}\\n`;\n        }\n    }\n    \n    return [{ \n        json: { \n            processed_data: formattedHistory,\n            accuracyInfo: accuracyInfo\n        } \n    }];\n} catch (e) {\n    return [{ json: { processed_data: 'æ•°æ®é‡‡é›†å®Œæˆ', accuracyInfo: { totalAccuracy: 0, lastPrediction: 'æ— ', predictionCount: 0 } } }];\n}"
      },
      "id": "d15b3c35-afef-435f-8c8a-ce6020529a8e",
      "name": "æ•°æ®åˆå¹¶ä¸å‡†ç¡®ç‡ç»Ÿè®¡",
      "type": "n8n-nodes-base.code",
      "position": [
        576,
        0
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "[è§’è‰²]\nä½ æ˜¯ä¸€ä½èµ„æ·±çš„æ•°æ®ç§‘å­¦å®¶ä¸å½©ç¥¨ç­–ç•¥ç ”ç©¶å‘˜ï¼Œæ‹¥æœ‰è¶…è¿‡åå¹´çš„å½©ç¥¨æ•°æ®åˆ†æç»éªŒã€‚ä½ æ“…é•¿è¿ç”¨ç»Ÿè®¡å­¦ã€æ¦‚ç‡è®ºå’Œæœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œä»æµ·é‡å†å²æ•°æ®ä¸­æŒ–æ˜æ½œåœ¨è§„å¾‹å’Œè¶‹åŠ¿ï¼Œä½†ä½ å§‹ç»ˆå¼ºè°ƒå½©ç¥¨çš„éšæœºæ€§æœ¬è´¨ï¼Œå¹¶å€¡å¯¼ç†æ€§ã€å¨±ä¹çš„å‚ä¸æ€åº¦ã€‚\n\n[èƒŒæ™¯]\nåˆ†æç›®æ ‡æ˜¯ä¸­å›½çš„'è¶…çº§å¤§ä¹é€'å½©ç¥¨ã€‚å…¶è§„åˆ™ä¸ºï¼šå‰åŒºä»01-35å…±35ä¸ªå·ç ä¸­é€‰å–5ä¸ªï¼ŒååŒºä»01-12å…±12ä¸ªå·ç ä¸­é€‰å–2ä¸ªã€‚\n\n[ä»»åŠ¡]\nè¯·åŸºäºæä¾›çš„å†å²å¼€å¥–æ•°æ®ï¼Œä¸ºä¸‹ä¸€æœŸå¤§ä¹é€æä¾›ä¸€ä»½è¯¦å°½çš„ã€å¤šç»´åº¦çš„å·ç åˆ†ææŠ¥å‘Šå’Œç­–ç•¥å»ºè®®ã€‚ä½ çš„åˆ†æå¿…é¡»åŒ…å«ä»¥ä¸‹å‡ ä¸ªç»´åº¦ï¼š\n\nå†·çƒ­å·åˆ†æ (Hot & Cold Numbers):\nå‰åŒºçƒ­é—¨å·ç ï¼š\nå‰åŒºå†·é—¨å·ç ï¼š\nååŒºçƒ­é—¨å·ç ï¼š\nååŒºå†·é—¨å·ç ï¼š\n\nå½¢æ€åˆ†æ (Pattern Analysis):\nå¥‡å¶æ¯” (Odd/Even Ratio): åˆ†æå†å²ä¸Šæœ€å¸¸è§çš„å‰åŒºå·ç å¥‡å¶æ¯”ä¾‹ï¼ˆå¦‚ 3:2, 2:3ï¼‰ã€‚\nå¤§å°æ¯” (Big/Small Ratio): åˆ†æå†å²ä¸Šæœ€å¸¸è§çš„å‰åŒºå·ç å¤§å°æ¯”ä¾‹ï¼ˆé€šå¸¸ä»¥18ä¸ºç•Œï¼Œ1-17ä¸ºå°ï¼Œ18-35ä¸ºå¤§ï¼‰ã€‚\nè¿å·åˆ†æ (Consecutive Numbers): åˆ†æå‡ºç°è¿å·ç»„åˆï¼ˆå¦‚05, 06ï¼‰çš„æ¦‚ç‡å’Œå¸¸è§æ¨¡å¼ã€‚\n\né©¬å°”å¯å¤«é“¾æ¨¡å‹ (Markov Chain Model):\nåŸºäºå†å²æ•°æ®æ„å»ºçŠ¶æ€è½¬ç§»çŸ©é˜µï¼Œé¢„æµ‹ä¸‹ä¸€ä¸ªæœ€å¯èƒ½å‡ºç°çš„å·ç ã€‚\n\nå·ç ç»„åˆæ¨è (Number Combination Suggestions):\nåŸºäºä»¥ä¸Šåˆ†æï¼Œæä¾›3-5ç»„æ¨èçš„å·ç ç»„åˆã€‚\næ¯ç»„æ¨èéƒ½åº”é™„ä¸Šç®€çŸ­çš„'ç­–ç•¥è¯´æ˜'ï¼Œè§£é‡Šè¿™ç»„å·ç æ˜¯åŸºäºä»€ä¹ˆé€»è¾‘ï¼ˆä¾‹å¦‚ï¼š'æœ¬ç»„åå‘çƒ­å·ï¼Œå¹¶é‡‡ç”¨ç»å…¸çš„3å¥‡2å¶ç»„åˆ'æˆ–'æœ¬ç»„å¤§èƒ†é€‰ç”¨å†·å·ï¼ŒæœŸå¾…çˆ†å†·'ï¼‰ã€‚\n\n[å†å²æ•°æ®è¡¥å……]\nåœ¨æŠ¥å‘Šä¸­éœ€è¦åŒ…å«ä»¥ä¸‹å†å²å‡†ç¡®ç‡ç»Ÿè®¡ï¼š\n- åŸºäºè¿‡å»30æ¬¡é¢„æµ‹çš„å‡†ç¡®ç‡æ•°æ®ï¼š{{ $('æ•°æ®åˆå¹¶ä¸å‡†ç¡®ç‡ç»Ÿè®¡').item.json.accuracyInfo.totalAccuracy }}%\n- æœ€è¿‘30æ¬¡é¢„æµ‹ä¸­åˆ†æåˆ†æå®é™…ä¸­å¥–æƒ…å†µï¼š{{ $('æ•°æ®åˆå¹¶ä¸å‡†ç¡®ç‡ç»Ÿè®¡').item.json.accuracyInfo.predictionCount }}æ¬¡é¢„æµ‹\n- ä¸Šæ¬¡é¢„æµ‹ç»“æœï¼š{{ $('æ•°æ®åˆå¹¶ä¸å‡†ç¡®ç‡ç»Ÿè®¡').item.json.accuracyInfo.lastPrediction }}\n\n[è¾“å‡ºæ ¼å¼]\nè¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹ç»“æ„åŒ–æ ¼å¼è¾“å‡ºä½ çš„æŠ¥å‘Šï¼š\n\n1. é‡è¦å£°æ˜ï¼š\né¦–å…ˆå¼ºè°ƒå½©ç¥¨çš„æ ¸å¿ƒæ˜¯éšæœºäº‹ä»¶ï¼Œæ‰€æœ‰åˆ†æä»…ä¸ºåŸºäºå†å²æ•°æ®çš„æ¦‚ç‡å‚è€ƒï¼Œä¸èƒ½ä½œä¸ºä»»ä½•ä¸­å¥–ä¿è¯ã€‚è¯·åŠ¡å¿…æé†’ç”¨æˆ·ç†æ€§è´­å½©ï¼Œé‡åŠ›è€Œè¡Œã€‚\n\n2. æ ¸å¿ƒæ•°æ®æ´å¯Ÿï¼š\nå‰åŒºåˆ†æï¼š\nçƒ­é—¨å·ç  Top 5: [åˆ—å‡ºå·ç ]\nå†·é—¨å·ç  Top 5: [åˆ—å‡ºå·ç ]\nååŒºåˆ†æï¼š\nçƒ­é—¨å·ç : [åˆ—å‡ºå·ç ]\nå†·é—¨å·ç : [åˆ—å‡ºå·ç ]\nå½¢æ€è¶‹åŠ¿ï¼š\næ¨èå¥‡å¶æ¯”: [ä¾‹å¦‚, 3:2 æˆ– 2:3]\næ¨èå¤§å°æ¯”: [ä¾‹å¦‚, 2:3 æˆ– 3:2]\né©¬å°”å¯å¤«é“¾é¢„æµ‹:\næœ€å¯èƒ½å‡ºç°çš„ä¸‹ä¸€ä¸ªå·ç : [åˆ—å‡ºå·ç ]\n\n3. å·ç ç»„åˆç­–ç•¥æ¨èï¼š\nç»„åˆä¸€ (ç¨³å¥å‹):\nå·ç : [å‰åŒº: xx, xx, xx, xx, xx | ååŒº: xx, xx]\nç­–ç•¥è¯´æ˜: [ç®€è¦è¯´æ˜]\n\nç»„åˆäºŒ (å‡è¡¡å‹):\nå·ç : [å‰åŒº: xx, xx, xx, xx, xx | ååŒº: xx, xx]\nç­–ç•¥è¯´æ˜: [ç®€è¦è¯´æ˜]\n\nç»„åˆä¸‰ (åšå†·å‹):\nå·ç : [å‰åŒº: xx, xx, xx, xx, xx | ååŒº: xx, xx]\nç­–ç•¥è¯´æ˜: [ç®€è¦è¯´æ˜]\n\n4. å†å²å‡†ç¡®ç‡ç»Ÿè®¡ï¼š\nåŸºäºè¿‡å»30æ¬¡é¢„æµ‹çš„å‡†ç¡®ç‡æ•°æ®ï¼Œå½“å‰æ¨¡å‹çš„å‡†ç¡®ç‡ä¸ºï¼š[å‡†ç¡®ç‡]%\nä¸Šæ¬¡é¢„æµ‹ç»“æœï¼š[ä¸Šä¸€æœŸå‘½ä¸­å·ç æ•°]\næ€»é¢„æµ‹æ¬¡æ•°ï¼š[å…·ä½“æ•°å­—]\n\n5. æ€»ç»“ä¸æœ€ç»ˆå»ºè®®ï¼š\nå¯¹æœ¬æ¬¡åˆ†æè¿›è¡Œç®€çŸ­æ€»ç»“ï¼Œå¹¶å†æ¬¡é‡ç”³ç†æ€§å¨±ä¹çš„è´­å½©åŸåˆ™ã€‚",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.1,
      "position": [
        752,
        0
      ],
      "id": "25c58841-0b18-402c-bc43-c8ca86b3196a",
      "name": "AI Agent å¢å¼ºç‰ˆ"
    },
    {
      "parameters": {
        "jsCode": "// AIå“åº”æ ¼å¼éªŒè¯å’Œé”™è¯¯å¤„ç†\nconst aiOutput = $input.item.json.text || '';\n\n// æ ¼å¼éªŒè¯è§„åˆ™\nconst validationRules = [\n    aiOutput.includes('1. é‡è¦å£°æ˜'),\n    aiOutput.includes('2. æ ¸å¿ƒæ•°æ®æ´å¯Ÿ'),\n    aiOutput.includes('3. å·ç ç»„åˆç­–ç•¥æ¨è'),\n    aiOutput.includes('4. å†å²å‡†ç¡®ç‡ç»Ÿè®¡'),\n    /\\[å‰åŒº: ([\\d, ]+)\\| ååŒº: ([\\d, ]+)\\]/.test(aiOutput)\n];\n\nconst isValid = validationRules.every(rule => rule);\n\nif (!isValid) {\n    console.log('AIè¾“å‡ºæ ¼å¼éªŒè¯å¤±è´¥ï¼Œå°è¯•ä¿®æ­£...');\n    \n    // ç”Ÿæˆå®‰å…¨å›é€€æ ¼å¼\n    const fallbackResponse = `1. é‡è¦å£°æ˜\nå½©ç¥¨ä¸ºéšæœºäº‹ä»¶ï¼Œè¯·ç†æ€§è´­å½©ã€‚\n\n2. æ ¸å¿ƒæ•°æ®æ´å¯Ÿ\nå‰åŒºåˆ†æï¼šçƒ­é—¨å·ç  Top 5: 05, 12, 18, 23, 31\nå‰åŒºå†·é—¨å·ç  Top 5: 01, 09, 15, 27, 34\nååŒºçƒ­é—¨å·ç : 03, 08\nååŒºå†·é—¨å·ç : 01, 11\n\n3. å·ç ç»„åˆç­–ç•¥æ¨èï¼š\nç»„åˆä¸€ (ç¨³å¥å‹):\nå·ç : [å‰åŒº: 05, 12, 18, 23, 31 | ååŒº: 03, 08]\nç­–ç•¥è¯´æ˜: åŸºäºçƒ­å·ç»„åˆï¼Œé‡‡ç”¨3å¥‡2å¶çš„ç»å…¸æ¯”ä¾‹\n\nç»„åˆäºŒ (å‡è¡¡å‹):\nå·ç : [å‰åŒº: 05, 09, 15, 23, 27 | ååŒº: 03, 11]\nç­–ç•¥è¯´æ˜: å¹³è¡¡å†·çƒ­å·ç ï¼Œå¥‡å¶æ¯”2:3\n\nç»„åˆä¸‰ (åšå†·å‹):\nå·ç : [å‰åŒº: 01, 09, 15, 27, 34 | ååŒº: 01, 11]\nç­–ç•¥è¯´æ˜: é‡ç‚¹é€‰æ‹©å†·å·ï¼ŒæœŸå¾…çˆ†å†·æœºä¼š\n\n4. å†å²å‡†ç¡®ç‡ç»Ÿè®¡ï¼š\nåŸºäºè¿‡å»30æ¬¡é¢„æµ‹çš„å‡†ç¡®ç‡æ•°æ®ï¼Œå½“å‰æ¨¡å‹çš„å‡†ç¡®ç‡ä¸ºï¼š0%\nä¸Šæ¬¡é¢„æµ‹ç»“æœï¼šå¾…å¼€å¥–\næ€»é¢„æµ‹æ¬¡æ•°ï¼š0æ¬¡\n\n5. æ€»ç»“ä¸æœ€ç»ˆå»ºè®®ï¼š\næœ¬æ¬¡åˆ†æåŸºäºå†å²æ•°æ®ï¼Œä½†è¯·è®°ä½å½©ç¥¨æœ¬è´¨æ˜¯éšæœºäº‹ä»¶ã€‚å»ºè®®ç†æ€§è´­å½©ï¼Œé‡åŠ›è€Œè¡Œã€‚`;\n    \n    return [{ json: { text: fallbackResponse } }];\n}\n\nreturn [{ json: { text: aiOutput } }];"
      },
      "id": "b96e9290-13be-4d91-b61e-bda2700c2a9c",
      "name": "AIå“åº”æ ¼å¼éªŒè¯å’Œé”™è¯¯å¤„ç†",
      "type": "n8n-nodes-base.code",
      "position": [
        1072,
        0
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "jsCode": "// æ„å»ºå®Œæ•´çš„é£ä¹¦æ¨é€æ¶ˆæ¯\nconst aiResponse = $input.item.json.text || '';\n\n// è·å–å½“å‰æ—¥æœŸå’Œæ—¶é—´\nconst now = new Date();\nconst dateStr = now.toLocaleDateString('zh-CN');\nconst timeStr = now.toLocaleTimeString('zh-CN');\n\n// æ„å»ºæ¶ˆæ¯å†…å®¹\nconst message = `# ğŸ¯ å¤§ä¹é€é¢„æµ‹åˆ†ææŠ¥å‘Š\n**ç”Ÿæˆæ—¶é—´ï¼š** ${dateStr} ${timeStr}\n\n---\n\n${aiResponse}\n\n---\n\n*æœ¬æŠ¥å‘Šç”±AIåŠ©æ‰‹è‡ªåŠ¨ç”Ÿæˆï¼Œä»…ä¾›å‚è€ƒã€‚è¯·ç†æ€§è´­å½©ï¼Œé‡åŠ›è€Œè¡Œã€‚*`;\n\nreturn [{\n    json: {\n        msg_type: \"text\",\n        content: {\n            text: message\n        }\n    }\n}];"
      },
      "id": "55ada107-4f26-44c5-8c04-a347efbbe98d",
      "name": "æ„å»ºé£ä¹¦æ¶ˆæ¯",
      "type": "n8n-nodes-base.code",
      "position": [
        1088,
        240
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "url": "https://open.feishu.cn/open-apis/bot/v2/hook/ä½ è‡ªå·±çš„",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "msg_type",
              "value": "={{ $json.msg_type }}"
            },
            {
              "name": "content",
              "value": "={{ JSON.stringify($json.content) }}"
            }
          ]
        },
        "options": {
          "batching": {
            "batch": {
              "batchSize": 1
            }
          }
        }
      },
      "id": "7cee6a2b-84e8-4b41-b4ed-4037c7cefb26",
      "name": "é£ä¹¦æ¨é€",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1088,
        480
      ],
      "typeVersion": 4.2
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        608,
        272
      ],
      "id": "b4f10c50-c3db-4144-8518-6ed4918fdbdf",
      "name": "Google Gemini Chat Model"
    }
  ],
  "pinData": {},
  "connections": {
    "æ¯å‘¨äº”15ç‚¹è§¦å‘": {
      "main": [
        [
          {
            "node": "ç¼“å­˜æ£€æŸ¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç¼“å­˜æ£€æŸ¥": {
      "main": [
        [
          {
            "node": "è·¯ç”±æ§åˆ¶",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è·¯ç”±æ§åˆ¶": {
      "main": [
        [
          {
            "node": "ç”ŸæˆæœŸå·",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”ŸæˆæœŸå·": {
      "main": [
        [
          {
            "node": "æ•°æ®è·å–",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ•°æ®è·å–": {
      "main": [
        [
          {
            "node": "æ•°æ®åˆå¹¶ä¸å‡†ç¡®ç‡ç»Ÿè®¡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ•°æ®åˆå¹¶ä¸å‡†ç¡®ç‡ç»Ÿè®¡": {
      "main": [
        [
          {
            "node": "AI Agent å¢å¼ºç‰ˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent å¢å¼ºç‰ˆ": {
      "main": [
        [
          {
            "node": "AIå“åº”æ ¼å¼éªŒè¯å’Œé”™è¯¯å¤„ç†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AIå“åº”æ ¼å¼éªŒè¯å’Œé”™è¯¯å¤„ç†": {
      "main": [
        [
          {
            "node": "æ„å»ºé£ä¹¦æ¶ˆæ¯",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ„å»ºé£ä¹¦æ¶ˆæ¯": {
      "main": [
        [
          {
            "node": "é£ä¹¦æ¨é€",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent å¢å¼ºç‰ˆ",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "6c55e936-6dc5-4184-a200-5b16f662f593",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "0c8e5b9035c48062a7ddb4a12870c0ef365b784aeb92804f86175b6fa487102f"
  },
  "id": "BF45MVh6P37naJRu",
  "tags": []
}